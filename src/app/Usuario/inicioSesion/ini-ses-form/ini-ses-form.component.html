<div class="container">
  <div class="left">
    <div class="left">
      <div *ngIf="!mostrarRegistrarseForm">
        <h1>Iniciar sesión</h1>
        <p>
          Nos alegra tenerte de vuelta y estamos listos para atender tus necesidades.
          Inicia sesión y continúa aprovechando al máximo nuestra plataforma.
        </p>
      </div>
      <div *ngIf="mostrarRegistrarseForm">
        <h1>Registrate</h1>
        <p>
          ¡Bienvenido! Estamos encantados de que quieras unirte a nuestra plataforma.
        </p>
      </div>

      <div class="feature">
        <span class="icon">📊</span>
        <div>
          <strong>Monitoreo integral</strong>
          <p>Administra, monitorea múltiples plantas de forma centralizada</p>
        </div>
      </div>
      <div class="feature">
        <span class="icon">🔔</span>
        <div>
          <strong>Notificaciones en tiempo real</strong>
          <p>Recibe notificaciones en tiempo real sobre las mediciones</p>
        </div>
      </div>
    </div>
  </div>
  <div class="right">
    <div>
      <form [formGroup]="formularioInicioSesion" (ngSubmit)="verificarDatosLogIn()" *ngIf="!mostrarRegistrarseForm">
        <h1>Portal de monitoreo</h1>
        <h2>Iniciar sesión</h2>

        <label>Username:</label>
        <input type="text" formControlName="username">
        <div *ngIf="formularioInicioSesion.controls['username'].invalid && formularioInicioSesion.controls['username'].touched">
          <p *ngIf="formularioInicioSesion.controls['username'].errors?.['required']">El email es obligatorio.</p>
          <p *ngIf="formularioInicioSesion.controls['username'].errors?.['username']">El email no es válido.</p>
        </div>

        <label>Contraseña:</label>
        <div class="password-container">
          <input [type]="mostrarContrasena ? 'text' : 'password'" formControlName="contrasenia">
          <button type="button" (click)="alternarVisibilidad()">
            {{ mostrarContrasena ? '👁️' : '🚫' }}
          </button>
        </div>
        <div *ngIf="formularioInicioSesion.controls['contrasenia'].invalid && formularioInicioSesion.controls['contrasenia'].touched">
          <p *ngIf="formularioInicioSesion.controls['contrasenia'].errors?.['required']">La contraseña es obligatoria.</p>
        </div>

        <div>
          <a style="cursor: pointer">¿Olvidaste tu contraseña?</a>
          <button type="submit">Iniciar sesión</button>
          <div>
            <p>Protegido por ReCaptcha sujeto a la política de privacidad y condiciones.</p>
          </div>
        </div>
      </form>
      <div *ngIf="!mostrarRegistrarseForm">
        <p>¿No tienes una cuenta?</p>
        <a style="cursor: pointer; color: #007bff" (click)="mostrarRegistrarseForm=true">Registrarse</a>
      </div>
    </div>

    <div>
      <form [formGroup]="formularioRegistro" (ngSubmit)="verificarDatosRegistro()" *ngIf="mostrarRegistrarseForm">
        <h1>Portal de monitoreo</h1>
        <h2>Registrarse</h2>

        <label>Nombre de usuario:</label>
        <input type="text" formControlName="username">
        <div *ngIf="formularioRegistro.controls['username'].invalid && formularioRegistro.controls['username'].touched">
          <p>El nombre de usuario es obligatorio.</p>
        </div>

        <label>Email:</label>
        <input type="email" formControlName="email">
        <div *ngIf="formularioRegistro.controls['email'].invalid && formularioRegistro.controls['email'].touched">
          <p *ngIf="formularioRegistro.controls['email'].errors?.['required']">El email es obligatorio.</p>
          <p *ngIf="formularioRegistro.controls['email'].errors?.['email']">El email no es válido.</p>
        </div>

        <label>Contraseña:</label>
        <div class="password-container">
          <input [type]="mostrarContrasena ? 'text' : 'password'" formControlName="contrasenia">
          <button type="button" (click)="alternarVisibilidad()">
            {{ mostrarContrasena ? '👁️' : '🚫' }}
          </button>
        </div>
        <div *ngIf="formularioRegistro.controls['contrasenia'].invalid && formularioRegistro.controls['contrasenia'].touched">
          <p *ngIf="formularioRegistro.controls['contrasenia'].errors?.['required']">La contraseña es obligatoria.</p>
          <p *ngIf="formularioRegistro.controls['contrasenia'].errors?.['minlength']">Debe tener al menos 8 caracteres.</p>
        </div>

        <label>Repetir contraseña:</label>
        <div class="password-container">
          <input type="password" formControlName="repetirContrasenia">
        </div>
        <div *ngIf="formularioRegistro.hasError('noCoincide') && formularioRegistro.controls['repetirContrasenia'].touched">
          <p>Las contraseñas no coinciden.</p>
        </div>

        <div>
          <button type="submit">Registrarse</button>
          <div>
            <p>Protegido por ReCaptcha sujeto a la política de privacidad y condiciones.</p>
          </div>
        </div>
      </form>

      <div *ngIf="mostrarRegistrarseForm">
        <p>¿Ya tienes una cuenta?</p>
        <a style="cursor: pointer; color: #007bff" (click)="mostrarRegistrarseForm=false">Iniciar sesión</a>
      </div>
    </div>
  </div>
</div>
